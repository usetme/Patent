<!DOCTYPE html>
<html lang="en" class="index">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->
<title></title>
<!-- BOOTSTRAP CORE STYLE  -->
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<!-- FONT AWESOME STYLE  -->
<link href="../assets/css/font-awesome.min.css" rel="stylesheet">
<!-- CUSTOM STYLE  -->
<link href="../assets/css/style.css" rel="stylesheet">
<link href="../assets/css/others.css" rel="stylesheet">
<script src="../assets/js/jquery-1.10.2.min.js"></script>
<script src="../assets/js/jquery.form.min.js"></script>
<script src="../assets/js/cookie.js"></script>
<script src="../assets/js/vue.min.js"></script>
</head>
<body>
	<div class="container site-top">
		<nav class="navbar">
			<div class="navbar-header">
				<img src="../assets/images/logo.png" alt="" />
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><span class="title"></span></li>
					<li><span class="text-muted">欢迎登录</span></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="">首页</a></li>
					<li><a href="">优势</a></li>
					<li><a href="">服务</a></li>
					<li><a href="">公司简介</a></li>
				</ul>
		</nav>
		<div class="logout">
			<span>你好！<span id="username"></span><span class="triangle-down"></span></span>
			<div>
				<span class="triangle-up"></span> <a href="javascript:void(0);" id="logout">退出</a>
			</div>
		</div>
	</div>
	<div class="container-fluid banner" id="app">
		<div>
			<div class="container">
				<div class="clearfix">
					<ol class="breadcrumb pull-left">
						<li class="active">基本资料</li>
						<li><a href="entrust.html">我的抢单</a></li>
						<li><a href="evaluationManagement.html">评价管理</a></li>
						<li><a href="rightsReport.html">售后服务</a></li>
						<li><a href="myNews.html">我的消息</a></li>
						<li><a href="withdrawal.html">我的财务</a></li>
					</ol>
					<a href="grabSingle.html" class="pull-right grab"></a> <a href="grabSingle.html"
						class="pull-right grab"></a>
				</div>
				<div class="site-nav">
					<ul>
						<li><a href="userDetails.html"><i class="icon icon-1"></i>基本资料</a>
							<ul>
								<li class="active"><a href="userDetails.html">个人信息</a></li>
								<li><a href="changePwd.html">重置密码</a></li>
							</ul></li>
						<li><a href="entrust.html"><i class="icon icon-2"></i>我的抢单</a></li>
						<li><a href="evaluationManagement.html"><i class="icon icon-4"></i>评价管理</a></li>
						<li><a href="rightsReport.html"><i class="icon icon-5"></i>售后服务</a>
							<ul>
								<li><a href="rightsReport.html">维权举报</a></li>
							</ul></li>
						<li><a href="myNews.html"><i class="icon icon-6"></i>我的消息(0)</a></li>
						<li><a href="withdrawal.html"><i class="icon icon-22"></i>我的财务</a>
							<ul>
								<li><a href="withdrawal.html">申请提现</a></li>
								<li><a href="csahDetails.html">现金明细</a></li>
							</ul></li>
					</ul>
				</div>
				<div class="site-main client">
					<div id="tabs">
						<ul class="nav nav-tabs">
							<li role="presentation" class="active"><a href="javascript:void(0);">个人信息</a></li>
							<li role="presentation"><a href="changePwd.html">重置密码</a></li>
						</ul>
					</div>
					<div class="clearfix">
						<p class="tip">以下信息仅用户本人可见，用户资料遵从专利派单保密原则！</p>
						<form id="reg" action="../auth/userinfo/userInfoChange" method="post" class="form-horizontal">
							<input type="hidden" name="access_token" value="" id="access">
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">姓名</label>
								<div class="col-xs-4">
									<input class="form-control" type="text" name="name" v-model="userInfo.name" disabled />
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">手机号</label>
								<div class="col-xs-4">
									<input class="form-control" type="text" name="phone" v-model="userInfo.phone" disabled />
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">身份证</label>
								<div class="col-xs-4">
									<input class="form-control" type="text" name="card" v-model="userInfo.card" disabled />
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">邮箱</label>
								<div class="col-xs-4">
									<input class="form-control" type="text" name="email" v-model="userInfo.email" disabled />
								</div>
								<div class="col-xs-1">
									<i class="icon icon-7" v-on:click="mod"></i>
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">QQ</label>
								<div class="col-xs-4">
									<input class="form-control" type="text" name="qq" v-model="userInfo.qq" disabled />
								</div>
								<div class="col-xs-1">
									<i class="icon icon-7" v-on:click="mod"></i>
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">所属地</label>
								<div class="col-xs-3">
									<select name="area_id1" class="form-control" v-model="province"
										v-on:change="changeProvince">
										<option value="">请选择</option>
										<option v-for="p in provinceList" value="{{p.id}}">{{p.name}}</option>
									</select>
								</div>
								<div class="col-xs-3">
									<select name="area_id2" v-model="city" class="form-control">
										<option value="">请选择</option>
										<option v-for="c in cityList" value="{{c.id}}">{{c.name}}</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label for="phone" class="col-xs-2 control-label">详细地址</label>
								<div class="col-xs-6">
									<input class="form-control" type="text" name="address" v-model="userInfo.address" disabled />
								</div>
								<div class="col-xs-1">
									<i class="icon icon-7" v-on:click="mod"></i>
								</div>
							</div>
							<div class="form-group">
								<div class="col-md-4 col-md-offset-2">
									<button type="button" class="btn btn-submit" v-on:click="submit">保存</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container footer">
		<div class="footer-img pull-left">
			<img src="../assets/images/weChat.png" class="pull-left" alt="" />
			<div class="pull-left">
				<p>扫一扫</p>
				<p>关注我们</p>
			</div>
		</div>
		<div class="footer-link pull-right">
			<div class="clearfix">
				<ul class="nav">
					<li><a href="">关于我们</a></li>
					<li><a href="">联系方式</a></li>
					<li><a href="">加入我们</a></li>
					<li><a href="">支付方式</a></li>
				</ul>
			</div>
			<p>Copyright 2005-2006zbj.com</p>
		</div>
	</div>
	<script>
    $(function(){
      $("#access").val(getCookie("access_token"))
      var vm = new Vue({
        el : "#app",
        data : {
          province : null,
          provinceList : [],
          city : null,
          cityList : [],
          iprType : [],
          userInfo : [],
        },
        created : function(){
          $.get("../area/getList?parent_id=1", function(data){
            vm.provinceList = data.data
          }, "JSON")
          $.get("../common/getIprType", function(data){
            vm.iprType = data.data
          }, "JSON")
        },
        ready : function(){
          $.post("../auth/userinfo/userInfo", {
            access_token : getCookie("access_token"),
          }, function(data){
            vm.userInfo = data.data
            vm.province = data.data.area_id1
            vm.changeProvince(function(){
              vm.city = data.data.area_id2
            })
          }, "JSON")
        },
        methods : {
          changeProvince : function(callback){
            $.get("../area/getList?parent_id=" + vm.province, function(data){
              vm.cityList = data.data
              vm.city = ""
              if (!!callback)
                callback()
            }, "JSON")
          },
          mod : function(event){
            $(event.target).closest(".form-group").find("input").attr("disabled", false);
          },
          submit : function(event){
            $("#reg").ajaxSubmit({
              dataType : "json",
              success : function(data){
                if (data.success) {
                  location.href = "userDetails.html?access_token=" + getCookie("access_token")
                } else {
                  
                }
              }
            })
          }
        }
      })
    })
  </script>
</body>
</html>