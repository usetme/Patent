<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->
<title></title>
<!-- BOOTSTRAP CORE STYLE  -->
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<!-- FONT AWESOME STYLE  -->
<link href="../assets/css/font-awesome.min.css" rel="stylesheet">
<!-- CUSTOM STYLE  -->
<link href="../assets/css/style.css" rel="stylesheet">
<link href="../assets/css/others.css" rel="stylesheet">
<link href="../assets/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
<link href="../assets/css/bootstrapValidator.min.css" rel="stylesheet">
<script src="../assets/js/jquery-1.10.2.min.js"></script>
<script src="../assets/js/jquery.form.min.js"></script>
<script src="../assets/js/bootstrap-datetimepicker.min.js"></script>
<script src="../assets/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../assets/js/bootstrapValidator.min.js"></script>
<script src="../assets/js/vue.min.js"></script>
</head>
<body>
	<div class="bgcol1">
		<div class="container site-top">
			<nav class="navbar">
				<div class="navbar-header">
					<img src="../assets/images/logo.png" alt="" />
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li><span class="title"></span></li>
						<li><span class="text-muted">欢迎登录</span></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="">首页</a></li>
						<li><a href="">优势</a></li>
						<li><a href="">服务</a></li>
						<li><a href="">公司简介</a></li>
					</ul>
			</nav>
		</div>
	</div>
	<div class="container register" id="app">
		<div class="left">
			<div id="form" class="form-horizontal">
				<input type="hidden" name="type" value="0" />
				<div class="form-group type">
					<label for="name" class="col-xs-3 control-label"><span>*</span>选择类别:</label>
					<div class="col-xs-9">
						<a href="../register/personalRegister.html">个人用户</a> <a
							href="../register/unitUserRegistration.html">企业用户</a> <a
							href="../register/agentRegister.html" class="active">代理人用户</a>
					</div>
				</div>
				<div class="form-group">
				<label for="phone" class="col-xs-3 control-label"><span>*</span>手机</label>
				<div class="col-xs-6">
					<input class="form-control" type="text" name="phone">
				</div>
			</div>
			<div class="form-group">
				<label for="phone" class="col-xs-3 control-label"><span>*</span>校验码</label>
				<div class="col-xs-3">
					<input class="form-control" type="text" name="code">
				</div>
				<div class="col-xs-3">
					<button type="button" class="phone_button" v-on:click="getCode" id="getCode">获取验证码</button>
				</div>
			</div>
			<div class="form-group">
				<label for="password" class="col-xs-3 control-label"><span>*</span>请输入密码</label>
				<div class="col-xs-6">
					<input class="form-control" type="password" name="password"> <span class="text-muted">密码长度8~16位数字、字母、字符至少包含两种</span>
				</div>
			</div>
			<div class="form-group mb">
				<label for="" class="col-xs-3 control-label"><span>*</span>请再次输入密码</label>
				<div class="col-xs-6">
					<input class="form-control" type="password" name="pwd">
				</div>
			</div>
				<div class="form-group">
					<label for="name" class="col-xs-3 control-label"><span>*</span>姓名</label>
					<div class="col-xs-6">
						<input class="form-control" type="text" name="name">
					</div>
				</div>
				<div class="form-group">
					<label for="card" class="col-xs-3 control-label"><span>*</span>身份证</label>
					<div class="col-xs-6">
						<input class="form-control" type="text" name="card">
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<form role="form" action="../common/upload" method="post" enctype="multipart/form-data"
							class="upload">
							 <span>上传身份证照片</span> <input type="file"
								class="form-control" name="file" v-on:change="upload" />
						</form>
						<input type="hidden" id="card_pic" />
					</div>
				</div>
				<div class="form-group">
					<label for="email" class="col-xs-3 control-label">邮箱</label>
					<div class="col-xs-6">
						<input class="form-control" type="email" name="email">
					</div>
				</div>
				<div class="form-group">
					<label for="qq" class="col-xs-3 control-label">QQ</label>
					<div class="col-xs-6">
						<input class="form-control" type="text" name="qq">
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-xs-3 control-label"><span>*</span>所属地</label>
					<div class="col-xs-3">
						<select name="area_id1" class="form-control" v-on:change="changeProvince">
							<option value="">请选择</option>
							<option v-for="p in province" value="{{p.id}}">{{p.name}}</option>
						</select>
					</div>
					<div class="col-xs-3">
						<select name="area_id2" class="form-control">
							<option value="">请选择</option>
							<option v-for="c in city" value="{{c.id}}">{{c.name}}</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="address" class="col-xs-3 control-label"><span>*</span>熟悉领域</label>
					<div class="col-xs-6">
						<div class="checkbox" v-for="s in getDomain">
							<label> <input type="checkbox" value="{{s.id}}" name="acquaintance_domain_id"><i></i>{{s.name}}
							</label>
						</div>
					</div>
				</div>
				<div class="form-group">
					<label for="address" class="col-xs-3 control-label"><span>*</span>从事代理人工作时间</label>
					<div class="col-xs-6">
						<div class="input-group">
							<input id="date-timepicker1" type="text" class="form-control rel" name="working_time">
							<span class="input-group-addon"> <i class="fa fa-clock-o bigger-110"></i>
						</div>
						</span>
					</div>
				</div>
				<div class="form-group">
					<label for="address" class="col-xs-3 control-label"><span>*</span>知识产权类型</label>
					<div class="col-xs-6">
						<div class="radio" v-for="i in iprType">
							<label> <input type="radio" value="{{i.id}}" name="ipr_type_id">{{i.name}}
							</label>
						</div>
					</div>
				</div>
				<div class="form-group">
					<label for="card" class="col-xs-3 control-label"><span>*</span>代理人证书</label>
					<div class="col-xs-6">
						<input type="text" placeholder="请输入证书编号" class="form-control" name="agent_certificate_no" />
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<form role="form" action="../common/upload" method="post" enctype="multipart/form-data"
							class="upload">
							<span>上传代理人证书照片</span> <input type="file"
								class="form-control" name="file" v-on:change="upload" />
						</form>
						<input type="hidden" id="agentScertificate_pic" />
					</div>
				</div>
				<div class="form-group">
					<label for="card" class="col-xs-3 control-label"><span>*</span>律师证书</label>
					<div class="col-xs-6">
						<input type="text" placeholder="请输入证书编号" class="form-control" name="lawyer_certificate_no" />
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<form role="form" action="../common/upload" method="post" enctype="multipart/form-data"
							class="upload">
							 <span>上传律师证书照片</span> <input type="file"
								class="form-control" name="file" v-on:change="upload" />
						</form>
						<input type="hidden" id="lawyer_pic" />
					</div>
				</div>
				<div class="form-group">
					<label for="card" class="col-xs-3 control-label"><span>*</span>最高学历</label>
					<div class="col-xs-6">
						<select name="qualifications_id" class="form-control">
							<option value="">请选择</option>
							<option v-for="e in education" value="{{e.id}}">{{e.name}}</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<form role="form" action="../common/upload" method="post" enctype="multipart/form-data"
							class="upload">
							 <span>上传学历证书</span> <input type="file"
								class="form-control" name="file" v-on:change="upload" />
						</form>
						<input type="hidden" id="qualifications_card_url" />
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<div class="checkbox">
							<label> <input type="checkbox"><i></i> 我已阅读并同意<a href=""> <<专利派单注册协议>>
									</a>
							</label>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-6 col-xs-offset-3">
						<button type="button" v-on:click="submit" class="btn btn-submit">注册</button>
					</div>
				</div>
			</div>
		</div>
		<div class="right">
			<p>
				<span class="text-muted">已有专利派单账号，</span><a href="../login.html">直接登陆</a>
			</p>
			<img src="../assets/images/weChat.png" alt="" class="wechat">
			<p class="text-muted">扫码关注我们</p>
		</div>
	</div>
	<div class="bgcol2">
		<div class="container footer">
			<div class="footer-link pull-left">
				<div class="clearfix">
					<ul class="nav">
						<li><a href="">关于我们</a></li>
						<li><a href="">联系方式</a></li>
						<li><a href="">加入我们</a></li>
						<li><a href="">支付方式</a></li>
					</ul>
				</div>
				<p>Copyright 2005-2006zbj.com</p>
			</div>
		</div>
	</div>
	<div class="site-quick">
		<ul>
			<li><img src="../assets/images/footer1.png" alt="" /></li>
			<li><img src="../assets/images/footer2.png" alt="" /></li>
			<li><img src="../assets/images/footer3.png" alt="" /></li>
		</ul>
	</div>
	<script>
    $(function(){
      var vm = new Vue({
        el : "#app",
        data : {
          province : [],
          city : [],
          iprType : [],
          education : [],
          getDomain : []
        },
        created : function(){
          $.get("../area/getList?parent_id=1", function(data){
            vm.province = data.data
          }, "JSON")
          $.get("../common/getIprType", function(data){
            vm.iprType = data.data
          }, "JSON")
          $.get("../common/getEducation", function(data){
            vm.education = data.data
          }, "JSON")
          $.get("../common/getDomain", function(data){
            vm.getDomain = data.data
          }, "JSON")
        },
        methods : {
          changeProvince : function(event){
            $.get("../area/getList?parent_id=" + $(event.target).val(), function(data){
              vm.city = data.data
            }, "JSON")
          },
          upload : function(event){
        		  $(event.target).closest("form").ajaxSubmit({
                      dataType : "json",
                      success : function(data){
                	  $.post("../attachment/getAttment/"+data.data,{
                	  },function(data){
                		  $(event.target).closest("form").next().val(data.data.id);
                          $(event.target).closest("form").after('<img src="'+data.data.path+'" class="only_img"/>');
                	  },"JSON")
                      }
                    })
             
              },
          getCode : function(event){
            var second = 60;
            $("#getCode").attr("disabled", true);
            var time = setInterval(function(){
              if (second < 0) {
                clearInterval(time);
                $("#getCode").attr("disabled", false).html("获取验证码");
              } else {
                $("#getCode").html(second + "秒后重新获取");
                second--;
              }
            }, 1000)
            		$.post("../vcode/addVcode",{
              		  phone:$("input[name='phone']").val()
              	  },function(data){
              		  if(data.success){
              			  
              		  }
              	  },"JSON");
          },
          submit : function(event){
        	$('#form').bootstrapValidator('validate')
            if ($('#form').data('bootstrapValidator').isValid()) {
              $.post("../register/create", {
                type : $("input[name='type']").val(),
                name : $("input[name='name']").val(),
                card : $("input[name='card']").val(),
                identification_card : $("#card_pic").val(),
                phone : $("input[name='phone']").val(),
                code:$("input[name='code']").val(),
                password : $("input[name='password']").val(),
                email : $("input[name='email']").val(),
                qq : $("input[name='qq']").val(),
                area_id1 : $("select[name='area_id1']").val(),
                area_id2 : $("select[name='area_id2']").val(),
                acquaintance_domain_id : $("input[name='acquaintance_domain_id']").val(),
                working_time : $("input[name='working_time']").val(),
                ipr_type_id : $("input[name='ipr_type_id']").val(),
                agent_certificate_no : $("input[name='agent_certificate_no']").val(),
                agent_certificate : $("#agentScertificate_pic").val(),
                lawyer_certificate_no : $("input[name='lawyer_certificate_no']").val(),
                lawyer_certificate : $("#lawyer_pic").val(),
                qualifications_id : $("select[name='qualifications_id']").val(),
                qualifications_card_url : $("#qualifications_card_url").val(),
              }, function(data){
                if (data.success) {
                  location.href = "loginPass.html?phone=" + $("input[name='phone']").val()
                } else {
                  
                }
              }, "JSON")
            } else {
              $('#form').bootstrapValidator('validate')
            }
          }
        }
      
      })

      $('#date-timepicker1').datetimepicker({
        startView : "year",
        minView : "year",
        maxView : "decade",
        format : "yyyy-mm",
        language : "zh-CN",
        autoclose : true,
        todayBtn : true
      }).next().on("click", function(){
        $(this).prev().focus();
      });
      setTimeout(function(){
        $('#form').bootstrapValidator({
          message : 'This value is not valid',
          feedbackIcons : {
            valid : 'glyphicon glyphicon-ok',
            invalid : 'glyphicon glyphicon-remove',
            validating : 'glyphicon glyphicon-refresh'
          },
          fields : {
            name : {
              message : '用户名验证失败',
              validators : {
                notEmpty : {
                  message : '用户名不能为空'
                },
              }
            },
            card : {
              validators : {
                notEmpty : {
                  message : '身份证号码不能为空'
                },
                regexp : {
                  regexp : /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,
                  message : '身份证号码格式错误'
                }
              }
            },
            phone : {
              validators : {
                notEmpty : {
                  message : '手机号码不能为空'
                },
                regexp : {
                  regexp : /^[0-9]{11}$/,
                  message : '手机号码格式错误'
                }
              }
            },
            code : {
              message : '验证码验证失败',
              validators : {
                notEmpty : {
                  message : '验证码不能为空'
                },
              }
            },
            password : {
              validators : {
                notEmpty : {
                  message : '密码不能为空'
                }
              }
            },
            pwd : {
              validators : {
                notEmpty : {
                  message : '密码不能为空'
                },
                identical : {
                  field : 'password',
                  message : '两次密码不一致'
                }
              }
            },
            email : {
              validators : {
                emailAddress : {
                  message : '请填写正确的邮箱地址。'
                }
              }
            },
            area_id1 : {
              message : '省份验证失败',
              validators : {
                notEmpty : {
                  message : '省份不能为空'
                },
              }
            },
            area_id2 : {
              message : '城市验证失败',
              validators : {
                notEmpty : {
                  message : '城市不能为空'
                },
              }
            },
            acquaintance_domain_id : {
              message : '熟悉领域验证失败',
              validators : {
                notEmpty : {
                  message : '熟悉领域不能为空'
                }
              }
            },
            working_time : {
              message : '从事代理人工作时间验证失败',
              validators : {
                notEmpty : {
                  message : '从事代理人工作时间不能为空'
                }
              }
            },
            ipr_type_id : {
              message : '知识产权类型验证失败',
              validators : {
                notEmpty : {
                  message : '知识产权类型不能为空'
                }
              }
            },
            agent_certificate_no : {
              message : '代理人证书验证失败',
              validators : {
                notEmpty : {
                  message : '代理人证书不能为空'
                }
              }
            },
            lawyer_certificate_no : {
              message : '律师证书验证失败',
              validators : {
                notEmpty : {
                  message : '律师证书不能为空'
                }
              }
            },
            qualifications_id : {
              message : '最高学历验证失败',
              validators : {
                notEmpty : {
                  message : '最高学历不能为空'
                }
              }
            }
          }
        })
      }, 50)

    });
  </script>
</body>
</html>